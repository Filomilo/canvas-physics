import{G as d}from"./AirDrag-2C_ulUqO.js";import{G as m}from"./Gravity-3Lf_bQKD.js";import{a as c,V as i,i as p,A as _,b as w,_ as f,G as u}from"./GameComponent.vue_vue_type_style_index_0_lang-Djne7a86.js";import{P as g}from"./PhysicBall-C_TsyqFJ.js";import{R as a}from"./Rectangle-DG1mBFxZ.js";import{r as h,P,a as y}from"./MathUtils-Bps6xgcu.js";import{d as v,c as b,a as S,b as F,u as x,o as O}from"./index-DvXseMqC.js";import"./Polygon-Tpd2I_Ih.js";class E extends c{_speed=0;_partcleLife=0;_partclePerSecond=1;_position=new i;_width=0;constructor(t,e,s=10,o=1){super(),this._position=t,this._width=e,this._partcleLife=o,this._speed=s}move(t){return this._position.add(t),this}rotate(t){return this}emitParticles(){const t=h(-this._width/2,this._width/2),e=new i(this._position.x+t,this._position.y),s=new i(0,-1).multiplyScalar(this._speed),o=new P(e,3,"white");return o._vel=s,o.life=this._partcleLife+h(-1,1)*this._partcleLife/2,[o]}}class B extends c{_position=new i;_width=0;_heightRange=0;_force=0;constructor(t,e,s,o){super(),this._position=t,this._width=e,this._heightRange=s,this._force=o}move(t){return this._position.add(t),this}rotate(t){return this}affect(t){if(p(t)){const s=t.getCenterPoint();if(s.x>this._position.x+this._width/2||s.x<this._position.x-this._width/2||s.y<this._position.y-this._heightRange||s.y>this._position.y)return;const n=(1-Math.abs(s.y-this._position.y)/this._heightRange)*this._force;t.addVelocity(new i(0,-n))}}}class G extends c{mainBody=new a(50,50,new i(0),"yellow");particleEmitter=new E(new i(0,-30),50,4,3);particleSolver=new y().addEmitter(this.particleEmitter).addAtrributeEditMethod(t=>{const e=t.age/t.life;t._radius=(1-e)*20});force=new B(new i(0,-30),50,300,.6);components=[this.particleSolver,this.mainBody,this.force,new a(40,10,new i(30,-30),"yellow").rotate(.5),new a(40,10,new i(-30,-30),"yellow").rotate(-.5),this.particleEmitter];constructor(t=new i(0)){super(),this.move(t)}onPress(){}onUnpress(){}isMouseOn(t){const e=this.mainBody.getTransformedPoints();return _.isPointWithinShape(t,e)}mouseOnState=!1;move(t){return this.components.forEach(e=>{w(e)&&e.move(t)}),this}rotate(t){return this}getChildObjects(){return this.components}isPressed=!1;update(t){if(this.isPressed===!0){const e=this.game?._MouseController.getMouseDelta();this.move(this.isPressed?e||new i(0,0):new i(0,0)),this.rotate(this.game?this.game?._MouseController.getScrollDelta():0)}}}const R={class:"DemoView"},V=10,z=v({__name:"FanTest",setup(r){const t=new i(100,700);new i(500,500).clone().sub(t).divideScalar(V);const s=new u;s.addObject(new G(new i(200,700))),s.addObject(new m),s.addObject(new d(1.58));const o=new g(new i(200,30),20,"red");return s.addObject(o),(l,n)=>(O(),b("main",R,[n[0]||(n[0]=S("div",{class:"titleStyle"},"Fan test",-1)),F(f,{class:"gameView",id:"shapes_demo",game:x(s)},null,8,["game"])]))}});export{z as default};
