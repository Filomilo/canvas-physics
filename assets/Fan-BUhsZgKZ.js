import{a as n,V as i,i as l,A as p,b as d}from"./GameComponent.vue_vue_type_style_index_0_lang-BQqnMhIl.js";import{R as r}from"./Rectangle-DiiF7b7r.js";import{P as m,a as _}from"./Particle-B2_smVyQ.js";import{r as h}from"./MathUtils-MIarnuZv.js";class w extends n{_speed=0;_partcleLife=0;_partclePerSecond=1;_position=new i;_width=0;constructor(t,e,s=10,o=1){super(),this._position=t,this._width=e,this._partcleLife=o,this._speed=s}resetTransforamtion(){return this._position=new i,this}isActive=!0;move(t){return this._position.add(t),this}rotate(t){return this}emitParticles(){const t=h(-this._width/2,this._width/2),e=new i(this._position.x+t,this._position.y),s=new i(0,-1).multiplyScalar(this._speed),o=new m(e,3,"white");return o._vel=s,o.life=this._partcleLife+h(-1,1)*this._partcleLife/2,[o]}}class f extends n{_position=new i;_width=0;_heightRange=0;_force=0;constructor(t,e,s,o){super(),this._position=t,this._width=e,this._heightRange=s,this._force=o}resetTransforamtion(){return this._position=new i,this}move(t){return this._position.add(t),this}rotate(t){return this}affect(t){if(l(t)){const s=t.getCenterPoint();if(s.x>this._position.x+this._width/2||s.x<this._position.x-this._width/2||s.y<this._position.y-this._heightRange||s.y>this._position.y)return;const c=(1-Math.abs(s.y-this._position.y)/this._heightRange)*this._force;t.addVelocity(new i(0,-c))}}}class v extends n{mainBody=new r(50,50,new i(0),"yellow");particleEmitter=new w(new i(0,-30),50,4,2);particleSolver=new _().addEmitter(this.particleEmitter).addAtrributeEditMethod(t=>{const e=t.age/t.life;t._radius=(1-e)*20});force=new f(new i(0,-30),50,300,1.9);components=[this.particleSolver,this.mainBody,this.force,new r(40,10,new i(30,-30),"yellow").rotate(.5),new r(40,10,new i(-30,-30),"yellow").rotate(-.5),this.particleEmitter];constructor(t=new i(0)){super(),this.move(t)}resetTransforamtion(){return this.move(this.posState.clone().multiplyScalar(-1)),this}onPress(){}onUnpress(){}isMouseOn(t){const e=this.mainBody.getTransformedPoints();return p.isPointWithinShape(t,e)}mouseOnState=!1;posState=new i;move(t){return this.posState.add(t),this.components.forEach(e=>{d(e)&&e.move(t)}),this}rotate(t){return this}getChildObjects(){return this.components}isPressed=!1;update(t){if(this.isPressed===!0){const e=this.game?._MouseController.getMouseDelta();this.move(this.isPressed?e||new i(0,0):new i(0,0)),this.rotate(this.game?this.game?._MouseController.getScrollDelta():0)}}}export{v as F};
